!function(){!function(e){var a={"short":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"long":["January","February","March","April","May","June","July","August","September","October","November","December"]},t=new Date,n=t.getFullYear();t.getMonth()+1,t.getDate(),e.fn.birthdaypicker=function(t){var r={maxAge:120,minAge:0,futureDates:!1,maxYear:n,dateFormat:"middleEndian",monthFormat:"short",placeholder:!0,legend:"",defaultDate:!1,fieldName:"birthdate",fieldId:"birthdate",hiddenDate:!0,onChange:null,tabindex:null};return this.each(function(){t&&e.extend(r,t);var l=e("<fieldset class='birthday-picker'></fieldset>"),o=e("<select class='birth-year' name='birth[year]'></select>"),i=e("<select class='birth-month' name='birth[month]'></select>"),d=e("<select class='birth-day' name='birth[day]'></select>"),p=function(){var t=new Date,n=(t.getFullYear(),t.getMonth()+1),l=t.getDate(),p=parseInt(o.val(),10),u=parseInt(i.val(),10),f=parseInt(d.val(),10),s=new Date(p,u,0).getDate(),m=parseInt(i.children(":last").val(),10),v=parseInt(d.children(":last").val(),10);if(v>s)for(;v>s;)d.children(":last").remove(),v--;else if(s>v)for(;s>v;)v++,d.append("<option value="+v+">"+v+"</option>");if(!r.futureDates&&p===c){if(m>n)for(;m>n;)i.children(":last").remove(),m--;if(u===n)for(;v>l;)d.children(":last").remove(),v-=1}if(p!==c&&12!==m)for(;12>m;)i.append("<option value="+(m+1)+">"+a[r.monthFormat][m]+"</option>"),m++;p*u*f!==0&&(10>u&&(u="0"+u),10>f&&(f="0"+f),h=p+"-"+u+"-"+f,e(this).find("#"+r.fieldId).val(h),null!==r.onChange&&r.onChange(h))};r.legend&&e("<legend>"+r.legends+"</legend>").appendTo(l);var u=r.tabindex;"bigEndian"===r.dateFormat?(l.append(o).append(i).append(d),null!==u&&(o.attr("tabindex",u),i.attr("tabindex",u++),d.attr("tabindex",u++))):"littleEndian"===r.dateFormat?(l.append(d).append(i).append(o),null!==u&&(d.attr("tabindex",u),i.attr("tabindex",u++),o.attr("tabindex",u++))):(l.append(i).append(d).append(o),null!==u&&(i.attr("tabindex",u),d.attr("tabindex",u++),o.attr("tabindex",u++))),r.placeholder&&(e("<option value='0'>Year:</option>").appendTo(o),e("<option value='0'>Month:</option>").appendTo(i),e("<option value='0'>Day:</option>").appendTo(d));var h;if(r.defaultDate){var f=new Date(r.defaultDate+"T00:00:00"),s=f.getFullYear(),m=f.getMonth()+1,v=f.getDate();10>m&&(m="0"+m),10>v&&(v="0"+v),h=s+"-"+m+"-"+v}r.hiddenDate&&e("<input type='hidden' name='"+r.fieldName+"'/>").attr("id",r.fieldId).val(h).appendTo(l);var c=n-r.minAge,g=n-r.maxAge;r.futureDates&&r.maxYear!==n&&(c=r.maxYear>1e3?r.maxYear:n+r.maxYear);var b,D,x;for(b=c;b>=g;b--)e("<option></option>").attr("value",b).text(b).appendTo(o);for(D=0;12>D;D++)e("<option></option>").attr("value",D+1).text(a[r.monthFormat][D]).appendTo(i);for(x=1;32>x;x++)e("<option></option>").attr("value",x).text(x).appendTo(d);if(e(this).append(l),r.defaultDate){var y=new Date(r.defaultDate+"T00:00:00");o.val(y.getFullYear()),i.val(y.getMonth()+1),d.val(y.getDate()),p()}l.change(p)})}}(jQuery)}();